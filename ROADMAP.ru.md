dart_swagger_to_models — Дорожная карта
=======================================

Ниже — план развития проекта на русском. Оригинальный английский вариант — в `ROADMAP.md`.

## v0.2 — Усиление ядра и улучшение DX

### 0.2.1 Улучшенная поддержка OpenAPI
- Нормализовать поддержку `oneOf` / `anyOf`:
  - Пока что — более безопасные `dynamic`-обёртки и понятные сообщения в логах.
  - Подготовить архитектуру под будущую генерацию union‑типов (особенно с `discriminator`).
- Расширить поддержку `allOf`:
  - Корректно обрабатывать вложенные комбинации `allOf` и случаи множественного наследования.
  - Добавить тесты на сложные составные схемы.

### 0.2.2 Конфигурационный файл генератора
- Добавить поддержку файла `dart_swagger_to_models.yaml` в корне проекта:
  - Глобальные опции: `defaultStyle`, `outputDir`, `projectDir`, `endpoint` по умолчанию.
  - Переопределения для отдельных схем: кастомный `className`, имена полей, маппинг типов.
- Добавить CLI‑опцию `--config` для указания пути к конфигу.
- Тесты:
  - Проверить приоритет: CLI > config > значения по умолчанию.

### 0.2.3 Качество генерируемого кода
- Запускать `dart format` для всех сгенерированных файлов (через флаг `--format`).
- Улучшения для enum’ов:
  - Поддержать `x-enumNames` / `x-enum-varnames`, если они есть в спецификации.
  - При отсутствии — сохранять текущее поведение.
- Гарантировать корректные импорты между моделями вместо `dynamic`, если для схемы есть реальный Dart‑тип.

## v0.3 — Расширяемость и стили

### 0.3.1 Подключаемые стили (pluggable styles)
- Публичный API для регистрации пользовательских стилей генерации:
  - Внешний пакет может предоставить свою реализацию `ClassGeneratorStrategy`.
  - Привязка имени стиля к стратегии через конфиг или расширяемую точку.
- Пример кастомного стиля:
  - Например, поддержка `equatable`, дополнительные `copyWith` и т.п.
- Документация:
  - Раздел “How to create your own generation style” с пошаговым гайдом.

### 0.3.2 Улучшение ergonomics для json_serializable / freezed
- Опциональная генерация `@JsonKey(name: '...')` для snake_case JSON‑ключей.
- Опции в конфиге:
  - `useJsonKey: true/false` (глобально и на уровне отдельной схемы).
- Обновить документацию и тесты, покрывающие поведение `JsonKey` и для `json_serializable`, и для `freezed`.

## v0.4 — Интеграция с экосистемой

### 0.4.1 Интеграция с build_runner
- Реализовать `Builder`, который:
  - читает спецификацию Swagger/OpenAPI и конфиг,
  - генерирует модели как часть пайплайна `build_runner`.
- Добавить проект в `example/`:
  - пример на чистом Dart,
  - пример на Flutter, где сгенерированные модели используются вместе с HTTP‑клиентом.
- Задокументировать интеграцию с `build_runner` в `docs/en/USAGE.md` и `docs/ru/USAGE.md`.

### 0.4.2 Улучшенный DX и логирование
- CLI‑флаги:
  - `--verbose` для подробных логов,
  - `--quiet` для минимального вывода.
- Человекочитаемые сообщения об ошибках:
  - отсутствующие цели для `$ref`,
  - неподдерживаемые или неоднозначные конструкции схем,
  - предупреждения о “подозрительных” спецификациях (например, `id` без `nullable: true`, но и без `required`).
- Сводка после генерации:
  - количество обработанных схем, enum’ов, созданных/обновлённых файлов.

## v0.5 — Инкрементальная генерация и lint спецификаций

### 0.5.1 Инкрементальная генерация
- Кэшировать последнюю обработанную спецификацию (хеши по схемам) в `.dart_swagger_to_models.cache`.
- Опция `--changed-only`:
  - перегенерировать только те модели, чьи схемы действительно изменились.
- Тесты:
  - добавление новой схемы,
  - удаление схемы,
  - изменение только одной схемы в большой спецификации.

### 0.5.2 Подсказки по качеству спецификаций (spec linting)
- Опциональный слой “lint” для спецификаций:
  - предупреждать о полях без `type`,
  - предупреждать о явно неконсистентных конструкциях (конфигурируемо).
- Конфигурируемые правила в `dart_swagger_to_models.yaml`:
  - включать/выключать отдельные lint‑правила,
  - настраивать уровень серьёзности (warning vs error).

---

Рекомендация по первым шагам
----------------------------

Начать логично с **v0.2.2 (конфиг‑файл)** и **v0.2.3 (качество кода)**:
- Эти задачи относительно изолированы.
- Они сильно улучшают DX без ломающих изменений в публичном API.
- Их удобно разбить на отдельные GitHub Issues / PR.

